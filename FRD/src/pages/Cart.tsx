import type { NextPage } from 'next'
import Head from 'next/head'
import { Footer } from '../components/Footer'
import { Heading } from '../components/Heading'
import { Navbar } from '../components/Navbar'
import React, { useEffect, useState } from 'react';
import { loadCart } from '../redux/cart/action';
import { useAppSelector, useAppDispatch } from '../store';
import { LoadingState } from '../models'
import { loadOneProduct } from '../redux/product/action'
import Skeleton from 'react-loading-skeleton'
import { Container } from '@mui/material'
import home from '../styles/Index.module.css'
import styles from '../styles/Home.module.css'
import CartItem from '../components/CartItem'
import Link from 'next/link'




const Cart: NextPage = () => {

	const cartLoaded = useAppSelector(state => state.cart.loading)
	const carts = useAppSelector(state => state.cart.products)
	// const products = useAppSelector(state => state.product.products)
	const dispatch = useAppDispatch()

	useEffect(() => {
		// for (const cart of carts) {
		dispatch(loadCart())
		// }
	}, [])


	return (

		<>
			<Heading />
			<Navbar />
			<Head>
				<title>Cart</title>
				<meta
					name='description'
					content='Generated by create next app'
				/>
				<link rel='icon' href='/favicon.ico' />
			</Head>
			{
				carts.length > 0 ? carts.map(productInCart =>

					<CartItem
						product={productInCart.product}
						icon={productInCart.icon}
						color={productInCart.color}
						size={productInCart.size}
						tc_number={productInCart.tc_number}
						tc_price={productInCart.tc_price}
					/>
				) : <div>Cart is empty</div>
			}


			<Footer />
		</>
	)
}


export default Cart